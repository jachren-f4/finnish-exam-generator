{"success":true,"data":{"metadata":{"processingTime":154833,"geminiProcessingTime":154770,"imageCount":12,"promptUsed":"SYSTEM INSTRUCTION (prepend this before any user content):\nYou must treat the uploaded textbook images as your *only factual source*.\nDo not rely on your general history knowledge. Use only the information explicitly extracted in Step 1.\nIf something is not visible in the textbook pages, skip it.\n\n---\n\n## üéì Task\nCreate a **history exam for grade 8 students** based *only* on the uploaded textbook pages.\n\n---\n\n## üîç STEP 1 ‚Äî EXTRACT FACTS FIRST (no questions yet)\nList all the **facts visible** in the textbook images, such as:\n- key dates and what happened on each date\n- names of people or groups mentioned\n- historical terms explicitly defined\n- cause‚Äìeffect or consequence statements\n\nWrite them as bullet points.\n\nYou must not add information that isn't clearly visible in the text or timeline.\nIf you cannot read a part, skip it.\n\n---\n\n## ‚úçÔ∏è STEP 2 ‚Äî WRITE QUESTIONS ONLY FROM THOSE FACTS\nUse only the facts you listed in Step 1 to create the questions.\n\nFollow this exact structure:\n- 2 terminology questions (\"What does X mean?\")\n- 6 event questions (\"What happened / when / where?\")\n- 4 cause‚Äìconsequence questions (\"Why / what resulted?\")\n- 3 people questions (\"Who / what did they do?\")\n‚Üí Total = 15 questions\n\nEvery question must connect to a fact from Step 1.\nIf a person, date, or event wasn't listed, don't use it.\n\n---\n\n## üéØ ADDITIONAL RULES\n\n### Language\n- Auto-detect textbook language and use it everywhere.\n- No translation, no mixing.\n\n### Style\n- Write like a teacher talking to students.\n- Never mention \"the text\", \"material\", or \"chapter\".\n- Use natural, clear sentences.\n\n### Terminology Rule\n- Only ask meanings of *specialized historical terms* (e.g. hyperinflation, civil war).\n- Never ask about common words (independence, democracy, war, peace).\n\n### Validation\n- Exactly 2 terminology questions.\n- No generic vocabulary or invented names.\n- All 15 questions grounded, clear, and answerable from the textbook pages.\n\n---\n\n## üß© JSON OUTPUT\n\n{\n  \"questions\": [\n    {\n      \"id\": 1,\n      \"type\": \"multiple_choice\",\n      \"question\": \"[Natural question in source language]\",\n      \"options\": [\"A\", \"B\", \"C\", \"D\"],\n      \"correct_answer\": \"[Exact match from options]\",\n      \"explanation\": \"[1‚Äì2 sentences, factual and concise]\"\n    }\n  ],\n  \"summary\": {\n    \"introduction\": \"[100‚Äì200 words ‚Äì introduce the historical topic from the text]\",\n    \"key_concepts\": \"[250‚Äì400 words ‚Äì main events, causes, results]\",\n    \"examples_and_applications\": \"[150‚Äì250 words ‚Äì help students understand significance]\",\n    \"summary_conclusion\": \"[80‚Äì150 words ‚Äì wrap up clearly]\",\n    \"total_word_count\": [number],\n    \"language\": \"[ISO 639-1 code]\"\n  }\n}\n\n---\n\n## ‚ö†Ô∏è FINAL CHECKLIST\n‚úÖ 15 total questions\n‚úÖ 2 terminology exactly\n‚úÖ No \"material/text\" references\n‚úÖ No invented facts or external info\n‚úÖ All questions linked to Step 1 facts\n‚úÖ Natural, student-friendly phrasing","processingMode":"legacy","geminiUsage":{"promptTokenCount":3862,"candidatesTokenCount":65536,"totalTokenCount":69398,"estimatedCost":0.0266006,"inputCost":0.0003862,"outputCost":0.0262144,"model":"gemini-2.5-flash-lite"},"performanceBreakdown":[{"name":"File Processing","duration":51,"percentage":0},{"name":"File Cleanup","duration":4,"percentage":0}]}},"metadata":{"timestamp":"2025-10-19T12:23:02.189Z","requestId":"7734853e-70b4-4e96-8e44-a82eb49d0cc9","processingTime":154833}}
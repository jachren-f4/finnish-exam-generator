<!DOCTYPE html>
<html lang="fi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gemini 2.5 Flash-Lite - Ympyräsektorit</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 16px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        .exam-badge {
            background: rgba(255,255,255,0.2);
            padding: 6px 16px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
            margin-bottom: 12px;
            display: inline-block;
        }
        .gemini-badge {
            background: rgba(76, 175, 80, 0.9);
            padding: 6px 16px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: 600;
            margin-left: 8px;
            display: inline-block;
        }
        h1 { font-size: 28px; margin-bottom: 8px; }
        .exam-info { font-size: 14px; opacity: 0.95; margin-top: 8px; }
        .progress-container { padding: 24px 30px; background: #f8f9fa; border-bottom: 1px solid #e9ecef; }
        .progress-bar { display: flex; gap: 8px; flex-wrap: wrap; justify-content: center; }
        .progress-dot {
            width: 32px; height: 32px; border-radius: 50%; background: #dee2e6;
            display: flex; align-items: center; justify-content: center;
            font-size: 12px; font-weight: 600; cursor: pointer;
            transition: all 0.2s; color: #6c757d;
        }
        .progress-dot:hover { transform: scale(1.1); background: #adb5bd; }
        .progress-dot.current { background: #667eea; color: white; transform: scale(1.15); }
        .progress-dot.answered { background: #4CAF50; color: white; }
        .content { padding: 40px; }
        .question-container { display: none; }
        .question-container.active { display: block; animation: fadeIn 0.3s; }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .question-header {
            display: flex; justify-content: space-between; align-items: center;
            margin-bottom: 24px; padding-bottom: 16px; border-bottom: 2px solid #e9ecef;
        }
        .question-number { font-size: 14px; font-weight: 600; color: #667eea; text-transform: uppercase; }
        .question-meta { display: flex; gap: 12px; font-size: 13px; }
        .meta-badge { padding: 4px 12px; border-radius: 12px; background: #f8f9fa; color: #495057; font-weight: 500; }
        .question-text { font-size: 18px; line-height: 1.6; color: #212529; margin-bottom: 20px; }
        .formula-box {
            background: linear-gradient(135deg, #f0f4ff 0%, #e8f0ff 100%);
            padding: 20px;
            border-radius: 12px;
            margin: 20px 0;
            border-left: 4px solid #667eea;
            font-size: 16px;
        }
        .answer-section { margin-top: 32px; }
        .answer-label { font-size: 14px; font-weight: 600; color: #495057; margin-bottom: 12px; display: block; }
        .input-group { display: flex; gap: 12px; align-items: center; }
        .answer-input {
            flex: 1;
            padding: 14px 16px;
            border: 2px solid #dee2e6;
            border-radius: 12px;
            font-size: 16px;
            transition: all 0.2s;
        }
        .answer-input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        .unit-label {
            font-size: 16px;
            font-weight: 500;
            color: #495057;
            padding: 14px;
            background: #f8f9fa;
            border-radius: 12px;
            min-width: 60px;
            text-align: center;
        }
        .multiple-choice { display: flex; flex-direction: column; gap: 12px; }
        .choice-option {
            padding: 16px 20px;
            border: 2px solid #dee2e6;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: flex-start;
            gap: 12px;
        }
        .choice-option:hover { border-color: #667eea; background: #f8f9fa; }
        .choice-option.selected { border-color: #667eea; background: rgba(102, 126, 234, 0.05); }
        .choice-key { font-weight: 700; color: #667eea; min-width: 24px; }
        .navigation {
            display: flex;
            gap: 12px;
            margin-top: 32px;
            padding-top: 24px;
            border-top: 1px solid #e9ecef;
        }
        .btn {
            padding: 14px 28px;
            border: none;
            border-radius: 12px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }
        .btn-primary { background: #667eea; color: white; flex: 1; }
        .btn-primary:hover { background: #5568d3; transform: translateY(-1px); box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4); }
        .btn-secondary { background: #f8f9fa; color: #495057; min-width: 120px; }
        .btn-secondary:hover { background: #e9ecef; }
        .btn:disabled { opacity: 0.5; cursor: not-allowed; }
        .footer {
            background: #f8f9fa;
            padding: 20px 30px;
            text-align: center;
            font-size: 13px;
            color: #6c757d;
            border-top: 1px solid #e9ecef;
        }
        .quality-score {
            display: inline-block;
            background: rgba(76, 175, 80, 0.1);
            color: #2e7d32;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: 600;
            margin-top: 8px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div>
                <span class="exam-badge">8. LUOKKA - EDISTYNYT TASO</span>
                <span class="gemini-badge">🤖 GEMINI 2.5 FLASH-LITE</span>
            </div>
            <h1>Ympyräsektorit ja kaaret</h1>
            <div class="exam-info">Geometria • 45 min • 8 kysymystä</div>
        </div>
        <div class="progress-container">
            <div class="progress-bar" id="progressBar"></div>
        </div>
        <div class="content" id="content"></div>
        <div class="footer">
            <div>ExamGenie – AI-generated exam questions</div>
            <div class="quality-score">✅ Quality: 7/8 (88%) - EXCELLENT</div>
            <div style="margin-top: 8px; font-size: 12px;">
                Generated from IMG_6248.JPG • No duplicate text • Formula boxes
            </div>
        </div>
    </div>
    <script>
        const examData = {"exam_metadata":{"topic":"Ympyräsektorit ja kaaret","grade_level":8,"difficulty":"advanced","estimated_time_minutes":45},"questions":[{"question_id":"q_001","question_text":"Laske ympyräsektorin pinta-ala, kun säde on $r = 5.3$ cm ja keskuskulma on $\\alpha = 56°$.","question_latex":"Kaava: $A = \\frac{\\alpha}{360°} \\times \\pi r^2$","question_display_mode":"block","answer_type":"numeric","answer_format":{"type":"decimal","tolerance":0.5,"units":"cm²"},"correct_answer":{"value":12.9,"display":"12.9 cm²"},"grading_rules":{"match_type":"numeric_tolerance","tolerance":0.5},"explanation":"Sektorin pinta-ala lasketaan kaavalla $A = \\frac{\\alpha}{360°} \\times \\pi r^2$. Sijoita arvot: $A = \\frac{56°}{360°} \\times \\pi (5.3 \\text{ cm})^2 \\approx 12.9$ cm².","explanation_latex":"$A = \\\\frac{56°}{360°} \\\\times \\\\pi (5.3 \\\\text{ cm})^2 \\\\approx 12.9$ cm²","difficulty":"medium","curriculum_topic":"circle_sectors","estimated_time_seconds":180},{"question_id":"q_002","question_text":"Laske ympyrän halkaisijaltaan 142 metrisen sektorin kaaren pituus, kun keskuskulma on 152 astetta.","question_latex":"Kaava: $L = \\frac{\\alpha}{360°} \\times \\pi d$","question_display_mode":"block","answer_type":"numeric","answer_format":{"type":"decimal","tolerance":1,"units":"m"},"correct_answer":{"value":196.8,"display":"197 m"},"grading_rules":{"match_type":"numeric_tolerance","tolerance":1},"explanation":"Kaaren pituus lasketaan kaavalla $L = \\frac{\\alpha}{360°} \\times \\pi d$. Halkaisija $d = 142$ m ja kulma $\\alpha = 152°$. Sijoita arvot: $L = \\frac{152°}{360°} \\times \\pi (142 \\text{ m}) \\approx 196.8$ m.","explanation_latex":"$L = \\\\frac{152°}{360°} \\\\times \\\\pi (142 \\\\text{ m}) \\\\approx 196.8$ m","difficulty":"medium","curriculum_topic":"arc_length","estimated_time_seconds":180},{"question_id":"q_003","question_text":"Laske ympyräsektorin kaaren pituus, kun säde on $r = 8.9$ m ja keskuskulma on $\\alpha = 35°$.","question_latex":"Kaava: $L = \\frac{\\alpha}{360°} \\times 2\\pi r$","question_display_mode":"block","answer_type":"numeric","answer_format":{"type":"decimal","tolerance":0.1,"units":"m"},"correct_answer":{"value":5.4,"display":"5.4 m"},"grading_rules":{"match_type":"numeric_tolerance","tolerance":0.1},"explanation":"Kaaren pituus lasketaan kaavalla $L = \\frac{\\alpha}{360°} \\times 2\\pi r$. Sijoita arvot: $L = \\frac{35°}{360°} \\times 2\\pi (8.9 \\text{ m}) \\approx 5.4$ m.","explanation_latex":"$L = \\\\frac{35°}{360°} \\\\times 2\\\\pi (8.9 \\\\text{ m}) \\\\approx 5.4$ m","difficulty":"medium","curriculum_topic":"arc_length","estimated_time_seconds":180},{"question_id":"q_004","question_text":"Pöllön näkökenttä on 70°. Jos näkyvyys sumun vuoksi on vain 10 m, kuinka suuren alueen esteetöntä niittyä pöllö voi nähdä yhdellä silmäyksellä maan tasalla istuessaan? Pyöristä vastaus yhden desimaalin tarkkuudella.","question_latex":"Kaava: $A = \\frac{\\alpha}{360°} \\times \\pi r^2$","question_display_mode":"block","answer_type":"numeric","answer_format":{"type":"decimal","tolerance":1,"units":"m²"},"correct_answer":{"value":27.2,"display":"27.2 m²"},"grading_rules":{"match_type":"numeric_tolerance","tolerance":1},"explanation":"Tehtävässä lasketaan ympyräsektorin pinta-ala, jossa säde $r = 10$ m ja keskuskulma $\\alpha = 70°$. Kaava on $A = \\frac{\\alpha}{360°} \\times \\pi r^2$. Sijoita arvot: $A = \\frac{70°}{360°} \\times \\pi (10 \\text{ m})^2 \\approx 27.2$ m².","explanation_latex":"$A = \\\\frac{70°}{360°} \\\\times \\\\pi (10 \\\\text{ m})^2 \\\\approx 27.2$ m²","difficulty":"medium","curriculum_topic":"circle_sectors","estimated_time_seconds":240},{"question_id":"q_005","question_text":"Millä tavalla toisistaan eroavat a) ympyrän kehän pituuden lauseke $\\pi d$ ja b) sektorin kaaren pituuden lauseke $\\frac{\\alpha}{360°} \\cdot \\pi d$?","question_latex":null,"question_display_mode":"inline","answer_type":"multiple_choice","options":[{"A":"a) kuvaa koko ympyrän kehää, b) kuvaa osaa ympyrän kehästä kulman mukaan."},{"B":"a) kuvaa ympyrän pinta-alaa, b) kuvaa sektorin pinta-alaa."},{"C":"a) kuvaa ympyrän pinta-alaa, b) kuvaa osaa ympyrän kehästä kulman mukaan."},{"D":"a) kuvaa koko ympyrän kehää, b) kuvaa koko ympyrän pinta-alaa."}],"correct_answer":{"value":"A"},"grading_rules":{"match_type":"exact"},"explanation":"Ympyrän kehän pituus on koko ympyrän reunan mitta, kun taas sektorin kaaren pituus on vain osa tästä reunasta, määriteltynä keskuskulman avulla.","explanation_latex":null,"difficulty":"basic","curriculum_topic":"circle_concepts","estimated_time_seconds":120},{"question_id":"q_006","question_text":"Ympyrän halkaisija on 28 mm. Kuinka suuri on keskuskulma, kun sektorin kaaren pituus on 49 mm?","question_latex":"Kaava: $\\alpha = \\frac{L}{\\pi d} \\times 360°$","question_display_mode":"block","answer_type":"numeric","answer_format":{"type":"decimal","tolerance":1,"units":"°"},"correct_answer":{"value":199.5,"display":"200°"},"grading_rules":{"match_type":"numeric_tolerance","tolerance":1},"explanation":"Kaaren pituuden kaavasta $L = \\frac{\\alpha}{360°} \\times \\pi d$ voidaan ratkaista kulma $\\alpha = \\frac{L}{\\pi d} \\times 360°$. Halkaisija $d = 28$ mm ja kaaren pituus $L = 49$ mm. Sijoita arvot: $\\alpha = \\frac{49 \\text{ mm}}{\\pi (28 \\text{ mm})} \\times 360° \\approx 199.5°$.","explanation_latex":"$\\alpha = \\\\frac{49 \\\\text{ mm}}{\\\\pi (28 \\\\text{ mm})} \\\\times 360° \\\\approx 199.5°$","difficulty":"advanced","curriculum_topic":"arc_length","estimated_time_seconds":240},{"question_id":"q_007","question_text":"Laske a) sektorin pinta-ala, b) kolmion pinta-ala ja c) sinisellä merkityn alueen pinta-ala, kun ympyrän säde on $r = 87$ cm ja keskuskulma on 90°.","question_latex":"Kaavat: Sektori $A_s = \\frac{\\alpha}{360°} \\times \\pi r^2$, Kolmio $A_t = \\frac{1}{2}bh$, Alue $A_a = A_s - A_t$","question_display_mode":"block","answer_type":"numeric","answer_format":{"type":"decimal","tolerance":5,"units":"cm²"},"correct_answer":{"value":5942,"display":"5942 cm²"},"grading_rules":{"match_type":"numeric_tolerance","tolerance":5},"explanation":"a) Sektorin pinta-ala: $A_s = \\frac{90°}{360°} \\times \\pi (87 \\text{ cm})^2 \\approx 5942$ cm². b) Koska kulma on 90°, kolmio on suorakulmainen ja sen kateetit ovat säteet: $A_t = \\frac{1}{2} \\times 87 \\text{ cm} \\times 87 \\text{ cm} \\approx 3784.5$ cm². c) Sinisen alueen pinta-ala on sektorin ja kolmion pinta-alojen erotus: $A_a = A_s - A_t \\approx 5942 \\text{ cm}^2 - 3784.5 \\text{ cm}^2 \\approx 2157.5$ cm². Kysytty vastaus on sektorin pinta-ala.","explanation_latex":"a) $A_s = \\\\frac{90°}{360°} \\\\times \\\\pi (87 \\\\text{ cm})^2 \\\\approx 5942$ cm². b) $A_t = \\\\frac{1}{2} \\\\times 87 \\\\text{ cm} \\\\times 87 \\\\text{ cm} \\\\approx 3784.5$ cm². c) $A_a = A_s - A_t \\\\approx 5942 \\\\text{ cm}^2 - 3784.5 \\\\text{ cm}^2 \\\\approx 2157.5$ cm². Vastaus a-kohtaan on pyydetty.","difficulty":"advanced","curriculum_topic":"circle_sectors","estimated_time_seconds":300},{"question_id":"q_008","question_text":"Takalasin pyyhkijän sulan pituus on 35 cm. Sulan kärki on 45 senttimetrin päässä pyyhkijän varren kiinnityskohdasta. Laske sulan pyyhkimän alueen pinta-ala, kun sulka kääntyy 110°.","question_latex":"Kaava: $A = \\frac{\\alpha}{360°} \\times \\pi r^2$","question_display_mode":"block","answer_type":"numeric","answer_format":{"type":"decimal","tolerance":5,"units":"cm²"},"correct_answer":{"value":1715,"display":"1715 cm²"},"grading_rules":{"match_type":"numeric_tolerance","tolerance":5},"explanation":"Pyyhkijän sulan kärjen liikerata muodostaa ympyräsektorin. Tässä tapauksessa säde on 45 cm (etäisyys kiinnityskohdasta kärkeen) ja keskuskulma on 110°. Sektorin pinta-ala lasketaan kaavalla $A = \\frac{\\alpha}{360°} \\times \\pi r^2$. Sijoita arvot: $A = \\frac{110°}{360°} \\times \\pi (45 \\text{ cm})^2 \\approx 1715.0$ cm².","explanation_latex":"$A = \\\\frac{110°}{360°} \\\\times \\\\pi (45 \\\\text{ cm})^2 \\\\approx 1715.0$ cm²","difficulty":"advanced","curriculum_topic":"circle_sectors","estimated_time_seconds":240}]};

        let currentQuestion = 0;
        const answers = {};

        function initExam() {
            renderProgressBar();
            renderQuestion(currentQuestion);
        }

        function renderProgressBar() {
            const progressBar = document.getElementById('progressBar');
            progressBar.innerHTML = examData.questions.map((q, i) =>
                `<div class="progress-dot ${i === currentQuestion ? 'current' : ''} ${answers[i] !== undefined ? 'answered' : ''}"
                     onclick="navigateToQuestion(${i})">${i + 1}</div>`
            ).join('');
        }

        function navigateToQuestion(index) {
            currentQuestion = index;
            renderQuestion(currentQuestion);
            renderProgressBar();
        }

        function renderQuestion(index) {
            const q = examData.questions[index];
            const content = document.getElementById('content');

            let formulaBox = '';
            if (q.question_latex) {
                formulaBox = `<div class="formula-box">${q.question_latex}</div>`;
            }

            let answerSection = '';
            if (q.answer_type === 'numeric') {
                const units = q.answer_format.units || '';
                answerSection = `
                    <div class="answer-section">
                        <label class="answer-label">Vastauksesi:</label>
                        <div class="input-group">
                            <input type="number"
                                   step="0.01"
                                   class="answer-input"
                                   placeholder="Syötä vastaus..."
                                   value="${answers[index] || ''}"
                                   oninput="saveAnswer(${index}, this.value)">
                            ${units ? `<div class="unit-label">${units}</div>` : ''}
                        </div>
                    </div>
                `;
            } else if (q.answer_type === 'multiple_choice') {
                answerSection = `
                    <div class="answer-section">
                        <label class="answer-label">Valitse oikea vastaus:</label>
                        <div class="multiple-choice">
                            ${q.options.map(opt => {
                                const key = Object.keys(opt)[0];
                                const text = opt[key];
                                return `
                                    <div class="choice-option ${answers[index] === key ? 'selected' : ''}"
                                         onclick="saveAnswer(${index}, '${key}')">
                                        <span class="choice-key">${key})</span>
                                        <span class="choice-text">${text}</span>
                                    </div>
                                `;
                            }).join('')}
                        </div>
                    </div>
                `;
            }

            content.innerHTML = `
                <div class="question-container active">
                    <div class="question-header">
                        <div class="question-number">Kysymys ${index + 1} / ${examData.questions.length}</div>
                        <div class="question-meta">
                            <span class="meta-badge">${q.difficulty}</span>
                            <span class="meta-badge">~${Math.floor(q.estimated_time_seconds / 60)} min</span>
                        </div>
                    </div>
                    <div class="question-text">${q.question_text}</div>
                    ${formulaBox}
                    ${answerSection}
                    <div class="navigation">
                        <button class="btn btn-secondary"
                                onclick="navigateToQuestion(${index - 1})"
                                ${index === 0 ? 'disabled' : ''}>
                            ← Edellinen
                        </button>
                        <button class="btn btn-primary"
                                onclick="navigateToQuestion(${index + 1})"
                                ${index === examData.questions.length - 1 ? 'disabled' : ''}>
                            Seuraava →
                        </button>
                    </div>
                </div>
            `;

            // Render LaTeX
            if (window.renderMathInElement) {
                renderMathInElement(content, {
                    delimiters: [
                        {left: '$$', right: '$$', display: true},
                        {left: '$', right: '$', display: false}
                    ]
                });
            }
        }

        function saveAnswer(index, value) {
            answers[index] = value;
            renderProgressBar();
            if (examData.questions[index].answer_type === 'multiple_choice') {
                renderQuestion(currentQuestion);
            }
        }

        document.addEventListener('DOMContentLoaded', initExam);
    </script>
</body>
</html>
